!function($){var Orderly=function($elements,options){this.__init($elements,options)},o=Orderly,p=o.prototype;o.counter=0,p.__init=function($elements,options){this.$elements=$elements,this.options=$.extend({},this.defaults,options)},p.defaults={resetHeight:""},p.attach=function(){void 0===this.attached&&($(window).on("resize",this.handlers().resize),this.attached=!0)},p.handlers=function(){var that=this;return{resize:function(){that._eachRow(function($elements){that._resizeElements($elements)})}}},p._columnCount=function(){var lastPos=0,pos=0,count=0;return this.$elements.each(function(){return pos=$(this).offset().left,count+=1,lastPos>=pos&&0!==lastPos?(count-=1,!1):void(lastPos=pos)}),count},p._eachRow=function(callback){for(var start,$row,d=this._dimensions(),i=0;i<d.r;i++)start=d.c*i,$row=this.$elements.slice(start,start+d.c),callback($row,i)},p._dimensions=function(){var columns=this._columnCount(),rows=Math.ceil(this.$elements.length/columns);return{c:columns,r:rows}},p._resizeElements=function($elements){var height=this._maxHeight($elements),options=this.options;$elements.each(function(i,element){$(element).css("height",height),$(element).trigger("orderly.resize",[element,height,i,$elements.length,options])})},p._maxHeight=function($elements){var value,current,box,max=0,options=this.options;return $elements.each(function(i,element){$(element).trigger("orderly.reset",[element,options.resetHeight,i,$elements.length,options]),$(element).css("height",options.resetHeight),box=element.getBoundingClientRect(),current=box.bottom-box.top,current>max&&(max=current)}),value=Math.round(max).toString(),value+="px"};var g={};g._delegate=function(options){var method="_"+(options&&options.method||"register"),m=g[method];m.call(this,options)},g._register=function(options){var o=new Orderly(this,options);o.attach(),o.handlers().resize()},g._children=function(options){var length=this[0].children.length,counter=o.counter++;g._childrenData.call(this,counter),g._registerChildren(length,counter,options),g._register.call(this,options)},g._childrenData=function(counter){this.each(function(i,element){$(element.children).each(function(i,child){$(child).attr("data-orderly",counter+":"+i)})})},g._registerChildren=function(length,counter,options){for(var i=0;length>i;i++)g._register.call(g._find(counter,i),options)},g._find=function(counter,i){return $('[data-orderly="'+counter+":"+i+'"]')},$.fn.orderly=function(options){return this.length>0&&g._delegate.call(this,options),this}}(jQuery);